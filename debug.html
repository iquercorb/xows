<!doctype html>
<html lang="fr">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Xows debug</title>
    <link rel="icon" href="favicon.png"/>

    <!-- Take care to set the proper path to files according your setup -->
    <script src="xows_base.js"></script> <!-- Base functions and constants -->
    <script src="xows_l10n.js"></script> <!-- l10n Module -->
    <script src="xows_xml.js"></script>  <!-- XML Module -->
    <script src="xows_sasl.js"></script> <!-- SALS Module -->
    <script src="xows_sck.js"></script>  <!-- WebSocket interface Module -->
    <script src="xows_xmp.js"></script>  <!-- XMPP Protocol interface Module -->
    <script src="xows_cach.js"></script> <!-- Cache & Local Storage Module -->
    <script src="xows_load.js"></script> <!-- Agnostic loader Module -->
    <script src="xows_cli.js"></script>  <!-- Main Client Module -->
    <script src="xows_tpl.js"></script>  <!-- HTML Templates Module -->
    <script src="xows_doc.js"></script>  <!-- DOM Managment Module -->
    <script src="xows_wrtc.js"></script> <!-- WebRTC interface -->
    <script src="xows_gui.js"></script>  <!-- User interface Module -->
    <script src="xows_init.js"></script> <!-- Main "public" API -->

  </head>

  <body>
    <!-- leave that empty -->
  </body>

  <script>
  // Set options
  const options = {
    // Base configuration
    "root"            : "/xows",                              //< Application root path (relative to base URL)
    "theme"           : "dark",                               //< Interface theme (directory)
    "verbose"         : 4,                                    //< Verbosity level (0-4)
    "mincss"          : false,                                //< Use theme minified CSS file (style.min.css)
    "uncache"         : true,                                 //< Prevent browser cache (force reload assets)

    // XMPP/Websocket configuration
    "url"             : "wss://localhost/xmpp-websocket/",    //< XMPP server Websocket address
    "domain"          : "localhost",                          //< XMPP server domain
    "login_delay"     : 2000,                                 //< Delay (in milliseconds) between login attempts

    // Interface configuration
    "locale"          : "en-US",                              //< Interface Localization
    "allow_register"  : true,                                 //< Enable account register link and dialog
    "history_count"   : 50,                                   //< Maximum count of history message to fetch each query
    "history_delay"   : 500,                                  //< Temporization delay for older message fetch

    // XMPP features configuration
    "avatar_notify"   : false,                                //< Request for User Avatar (XEP-0084) PubSub notifications
    "avatar_autopub"  : true,                                 //< Auto-publish the default Avatar if none exists for user
    "extern_services" : [ { type:"stun",                      //< Manually defined XMPP External Services (following XEP-0215 schemas)
                            transport:"udp",
                            host:"stun.example.net",
                            port:"3478" },
                            
                          { type:"turn",
                            transport:"udp",
                            host:"turn.example.net",
                            port:"3478",
                            secret:"7d77f8a6ac0bc041959af2abe460" } ],
  };
  // Initialize
  xows_init(options);
  </script>

</html>
